<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ title }} â€” Level {{ level_id }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='index.css') }}" />
  </head>

  <body class="lesson-page">
    <header class="lesson-header">
      <a class="lesson-header__close" href="{{ url_for('pages.lessons') }}" aria-label="Close and return to lessons">âœ•</a>
      <div class="lesson-header__progress">
        <div class="lesson-header__bar" id="progressBar" role="progressbar" aria-valuenow="1" aria-valuemin="0" aria-valuemax="{{ total_steps }}" style="width: 20%;"></div>
      </div>
      <span class="lesson-header__count" id="progressCount">1/{{ total_steps }}</span>
    </header>

    <div class="lesson-layout">
      <aside class="linglong-panel">
        <div class="linglong-card" id="linglongCard">
          <div class="linglong__icon linglong__icon--watching" id="linglongIcon" aria-hidden="true"></div>
          <div class="linglong__icon linglong__icon--mad" id="linglongIconMad" aria-hidden="true"></div>
          <p class="linglong__text" id="linglongText">Linglong is watching...</p>
        </div>
      </aside>

      <main class="lesson-main">
        <div class="lesson-step is-active" data-step="1" id="step1">
          <span class="lesson-mode-tag">Reading Mode</span>
          <h1 class="lesson-title">FILL IN THE BLANK</h1>
          <div class="lesson-prompt">
            <button type="button" class="lesson-prompt__speaker" aria-label="Play sound and read text">ðŸ”Š</button>
            <span>Apa ___?</span>
          </div>
          <div class="lesson-options" data-correct="kabar">
            <button type="button" class="lesson-option" data-value="kabar">kabar</button>
            <button type="button" class="lesson-option" data-value="makan">makan</button>
            <button type="button" class="lesson-option" data-value="tidur">tidur</button>
          </div>
          <button type="button" class="lesson-submit" id="submitBtn">
            <span class="lesson-submit__icon" aria-hidden="true">âœˆ</span>
            Submit
          </button>
          <div class="lesson-verbal">
            <button type="button" class="lesson-verbal__btn" aria-label="Answer verbally">ðŸŽ¤</button>
            <span class="lesson-verbal__label">Or answer verbally</span>
          </div>
        </div>

        <div class="lesson-step" data-step="2" id="step2">
          <span class="lesson-mode-tag">Reading Mode</span>
          <h1 class="lesson-title">WATCH & ANSWER</h1>
          <div class="lesson-video-placeholder">
            <span class="lesson-video-placeholder__icon" aria-hidden="true">ðŸŽ¬</span>
            <span class="lesson-video-placeholder__text">Video Reel</span>
          </div>
          <div class="lesson-phrase">Siapa namamu?</div>
          <p class="lesson-question">What is the person asking?</p>
          <div class="lesson-options lesson-options--single" data-correct="Your name">
            <button type="button" class="lesson-option" data-value="Your name">Your name</button>
            <button type="button" class="lesson-option" data-value="My name">My name</button>
            <button type="button" class="lesson-option" data-value="Their name">Their name</button>
          </div>
          <button type="button" class="lesson-submit" id="submitBtn2">
            <span class="lesson-submit__icon" aria-hidden="true">âœˆ</span>
            Submit
          </button>
          <div class="lesson-verbal">
            <button type="button" class="lesson-verbal__btn" aria-label="Answer verbally">ðŸŽ¤</button>
            <span class="lesson-verbal__label">Or answer verbally</span>
          </div>
        </div>

        <div class="lesson-step" data-step="3" id="step3">
          <span class="lesson-mode-tag">Reading Mode</span>
          <h1 class="lesson-title">CHOOSE THE MEANING</h1>
          <div class="lesson-prompt">
            <button type="button" class="lesson-prompt__speaker" aria-label="Play sound and read text">ðŸ”Š</button>
            <span>Terima kasih</span>
          </div>
          <p class="lesson-question">What does this mean?</p>
          <div class="lesson-options" data-correct="Thank you">
            <button type="button" class="lesson-option" data-value="Thank you">Thank you</button>
            <button type="button" class="lesson-option" data-value="Goodbye">Goodbye</button>
            <button type="button" class="lesson-option" data-value="Hello">Hello</button>
          </div>
          <button type="button" class="lesson-submit" id="submitBtn3">
            <span class="lesson-submit__icon" aria-hidden="true">âœˆ</span>
            Submit
          </button>
          <div class="lesson-verbal">
            <button type="button" class="lesson-verbal__btn" aria-label="Answer verbally">ðŸŽ¤</button>
            <span class="lesson-verbal__label">Or answer verbally</span>
          </div>
        </div>

        <div class="lesson-step" data-step="4" id="step4">
          <span class="lesson-mode-tag">Reading Mode</span>
          <h1 class="lesson-title">FILL IN THE BLANK</h1>
          <div class="lesson-prompt">
            <button type="button" class="lesson-prompt__speaker" aria-label="Play sound and read text">ðŸ”Š</button>
            <span>Selamat ___</span>
          </div>
          <div class="lesson-options" data-correct="pagi">
            <button type="button" class="lesson-option" data-value="pagi">pagi</button>
            <button type="button" class="lesson-option" data-value="malam">malam</button>
            <button type="button" class="lesson-option" data-value="tinggal">tinggal</button>
          </div>
          <button type="button" class="lesson-submit" id="submitBtn4">
            <span class="lesson-submit__icon" aria-hidden="true">âœˆ</span>
            Submit
          </button>
          <div class="lesson-verbal">
            <button type="button" class="lesson-verbal__btn" aria-label="Answer verbally">ðŸŽ¤</button>
            <span class="lesson-verbal__label">Or answer verbally</span>
          </div>
        </div>

        <div class="lesson-step" data-step="5" id="step5">
          <span class="lesson-mode-tag">Reading Mode</span>
          <h1 class="lesson-title">CHOOSE THE MEANING</h1>
          <div class="lesson-prompt">
            <button type="button" class="lesson-prompt__speaker" aria-label="Play sound and read text">ðŸ”Š</button>
            <span>Sampai jumpa</span>
          </div>
          <p class="lesson-question">What does this mean?</p>
          <div class="lesson-options" data-correct="See you">
            <button type="button" class="lesson-option" data-value="See you">See you</button>
            <button type="button" class="lesson-option" data-value="Welcome">Welcome</button>
            <button type="button" class="lesson-option" data-value="Sorry">Sorry</button>
          </div>
          <button type="button" class="lesson-submit" id="submitBtn5">
            <span class="lesson-submit__icon" aria-hidden="true">âœˆ</span>
            Submit
          </button>
          <div class="lesson-verbal">
            <button type="button" class="lesson-verbal__btn" aria-label="Answer verbally">ðŸŽ¤</button>
            <span class="lesson-verbal__label">Or answer verbally</span>
          </div>
        </div>
      </main>
    </div>

    <div class="lesson-popup lesson-popup--wrong" id="popupWrong" role="alertdialog" aria-labelledby="popupWrongTitle" aria-modal="true" hidden>
      <div class="lesson-popup__backdrop" id="popupWrongBackdrop"></div>
      <div class="lesson-popup__box">
        <h2 class="lesson-popup__title" id="popupWrongTitle">Wrong!</h2>
        <p class="lesson-popup__msg">Try again. You've got this!</p>
        <button type="button" class="lesson-popup__btn" id="popupWrongClose">OK</button>
      </div>
    </div>

    <div class="lesson-popup lesson-popup--complete" id="popupComplete" role="alertdialog" aria-labelledby="popupCompleteTitle" aria-modal="true" hidden>
      <div class="lesson-popup__backdrop" id="popupCompleteBackdrop"></div>
      <div class="lesson-popup__box">
        <h2 class="lesson-popup__title" id="popupCompleteTitle">Level complete!</h2>
        <p class="lesson-popup__msg">Level 2 is now unlocked.</p>
        <a href="{{ url_for('pages.lessons') }}" class="lesson-popup__btn" id="popupCompleteClose">Back to Lessons</a>
      </div>
    </div>

    <script src="{{ url_for('static', filename='js/api.js') }}" defer></script>
    <script src="{{ url_for('static', filename='lesson.js') }}" defer></script>
  </body>
</html>
